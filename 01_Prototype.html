
<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">

    <title>Prototype</title>

    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

    <link rel="stylesheet" href="reveal.js/css/reveal.css">
    <link rel="stylesheet" href="reveal.js/css/theme/black.css" id="theme">

    <!-- Code syntax highlighting -->
    <link rel="stylesheet" href="reveal.js/lib/css/zenburn.css">

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement( 'link' );
      link.rel = 'stylesheet';
      link.type = 'text/css';
      link.href = window.location.search.match( /print-pdf/gi ) ? 'reveal.js/css/print/pdf.css' : 'reveal.js/css/print/paper.css';
      document.getElementsByTagName( 'head' )[0].appendChild( link );
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->
  </head>

  <body>

    <div class="reveal">

      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h1>Héritage et chaîne des prototypes</h1>
          <p>
            <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/H%C3%A9ritage_et_cha%C3%AEne_de_prototypes">
              https://developer.mozilla.org/.../Héritage_et_chaîne_de_prototypes
            </a>
          </p>
          <p>
            <a href="https://developer.mozilla.org/fr/docs/Web/JavaScript/Reference/Objets_globaux/Object/create">
              https://developer.mozilla.org/.../Objets_globaux/Object/create
            </a>
          </p>

        </section>

        <section>
          <h2>Objet JavaScript</h2>
          <pre><code class="hljs" data-trim>
var o = {
  x: 1,
  y: 1
};
console.log(o.x);
          </code></pre>
        </section>

        <section>
          <h2>Objet JavaScript</h2>
          <p>
            Les méthodes sont elles aussi des propriétés.
          </p>
          <pre><code class="hljs" data-trim>
var o = {
  x: 1,
  y: 1,
  z: function() {
    return "abc";
  }
};
console.log(o.z());
          </code></pre>
        </section>

        <section>
          <h2>Objet prototype</h2>
          <p>
            Tout objet possède un lien vers un <code>objet prototype</code>.
          </p>
          <p>
            Par défaut : <code>Object.prototype</code>.
          </p>
          <p>
            L'objet prototype d'Objet.prototype est : <code>null</code>.
          </p>
        </section>

        <section>
          <h2>Comment accéder à l'Objet prototype d'un objet?</h2>
          <pre><code class="hljs" data-trim>
var o = { x: 1, y: 1 };
Object.getProtoypeOf(o);
o.__proto__; // ES6
          </code></pre>
          <p>
            <strong>Exercice</strong> : faire le test dans la console de votre navigateur. Toujours dans la console, inspecter la valeur de <code>Object.prototype</code>.
          </p>
        </section>

        <section>
          <h2>Chaîne des prototypes et résolution des propriétés</h2>
          <p>
            La propriété est d'abord recherchée dans l'objet "o". Si elle n'est pas trouvée, elle est ensuite cherchée dans l'objet prototype, puis dans l'objet prototype de l'objet prototype... et ainsi de suite jusqu'à ce qu'elle soit trouvée, ou bien jusqu'à ce que l'objet prototype soit <code>null</code>.
          </p>
          <pre><code class="hljs" data-trim>
var o = { x: 1 };
o.hasOwnProperty('x'); // true
// o --> Object.prototype --> hasOwnProperty()
          </code></pre>
        </section>

        <section>
          <h2>Création d'objets avec prototype natif</h2>
          <pre><code class="hljs" data-trim>
var s = "abc";
// s --> String.prototype --> Object.prototype --> null

var a = [1, 2, 3];
// a --> Array.prototype --> Object.prototype --> null

var f = function() { return 1; };
// f --> Function.prototype --> Object.prototype --> null
          </code></pre>
          <p>
            <strong>Exercice</strong> : En utilisant la console de votre navigateur, lister les méthodes définis dans Array.prototype.
          </p>
        </section>

        <section>
          <h2>Création d'objets avec Object.create</h2>
          <p>
            Permet d'instancier un nouvel objet avec le prototype donné.
          </p>
          <pre><code class="hljs" data-trim>
var a = { x: 1 };

var b = Object.create(a);
// b --> a --> Object.prototype --> null

var c = Object.create(b);
// c --> b --> a --> Object.prototype --> null

console.log(c.x); // ???
c.x = 2;
console.log(c.x); // ???
console.log(b.x); // ???
console.log(a.x); // ???
          </code></pre>
        </section>

        <section>
          <h2>Création d'objets avec new</h2>
          <p>
            Permet d'instancier un nouvel objet avec un constructeur.
          </p>
          <pre><code class="hljs" data-trim>
function Personne(nom, prenom) {
  this.nom = nom;
  this.prenom = prenom;
}

Personne.prototype.getNomPrenom = function() {
  return this.nom + ' ' + this.prenom;
};

var ol = new Personne('Lecrivain', 'Olivier');
// Equivalent à:
// var ol = new Object();
// ol.[[Prototype]] = Personne.prototype;
// Personne.call(ol, 'Lecrivain', 'Olivier');
          </code></pre>
        </section>

        <section>
          <h2>Héritage avec Object.create</h2>
          <pre><code class="hljs" data-trim>
function Personne(nom, prenom) {
  this.nom = nom;
  this.prenom = prenom;
}
Personne.prototype.getNomPrenom = function() {
  return this.nom + ' ' + this.prenom;
};
function Femme(nom, prenom) {
  Personne.call(this, nom, prenom);
}

Femme.prototype = Object.create(Personne.prototype);
Femme.prototype.constructor = Femme;
Femme.prototype.getNomPrenom = function() {
  return 'Mme ' + Personne.prototype.getNomPrenom.call(this);
};

var marie = new Femme('Curie', 'Marie');
console.log(marie.getNomPrenom());
          </code></pre>
        </section>

        <section>
          <h2>Disclamer</h2>
          <p>
            Ces notions sont surtout utiles pour implémenter des briques techniques : librairies, des frameworks...
          </p>
          <p>
            Mais elles sont rarement utilisées dans le cadre du développement d'applications Angular.
          </p>
        </section>

      </div>

    </div>

    <script src="reveal.js/lib/js/head.min.js"></script>
    <script src="reveal.js/js/reveal.js"></script>

    <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,
        lideNumber: true,
        slideNumber: 'c/t',

        transition: 'slide', // none/fade/slide/convex/concave/zoom

        // Optional reveal.js plugins
        dependencies: [
          { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
          { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
          { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true },
          { src: 'reveal.js/plugin/notes/notes.js', async: true }
        ]
      });

    </script>

  </body>
</html>
